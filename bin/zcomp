#!/bin/bash

(
echo "original $(wc -c < "$@")"
for level in 1 5 9; do
  echo ""
  echo "gzip  -$level $(gzip  -$level -c - < "$@" | wc -c)"
  echo "bzip2 -$level $(bzip2 -$level -c - < "$@" | wc -c)"
  echo "xz    -$level $(xz    -$level -c - < "$@" | wc -c)"
done
) | awk '
NR == 1 {original=$2}
NF == 0 { print ""; next }
{printf "%s %5.1f%%\n", $0, $NF/original*100}
'

