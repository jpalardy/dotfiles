#!/bin/bash

path="${1:-"$HOME/Downloads"}"
tmpfile=$(mktemp)

# remove trailing /
path="${path%/}"

set trap
cleanup() {
  rm -f "$tmpfile" INT TERM EXIT
}
trap cleanup INT TERM EXIT

(echo; ls -t "$path") > "$tmpfile"
${VISUAL:-${EDITOR:-vi}} "$tmpfile"

awk -v path="$path" '
# done on empty line
NF == 0 { exit }
{ printf "mv -v \"%s/%s\" .\n", path, $0, "." }
' "$tmpfile" | bash

